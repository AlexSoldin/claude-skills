# Refresh Cursor Rules

When asked to refresh, update, or reinstall Cursor rules, follow these instructions to pull the latest changes from the claude-skills repository and run the install script.

## Instructions

### 1. Find and navigate to the repository

Locate the claude-skills repository by following a symlink from `~/.cursor/rules`:

```bash
# Find the repo by following a rule symlink
RULE_LINK=$(readlink ~/.cursor/rules/commit-push-pr.mdc)
REPO_DIR=$(dirname "$(dirname "$RULE_LINK")")
echo "Found repository at: $REPO_DIR"
cd "$REPO_DIR"
```

If the symlink doesn't exist or isn't valid, inform the user they need to clone the repository first.

### 2. Check current state

Show the user what's currently installed:

```bash
echo "=== Current rules in repository ==="
ls -1 cursor-rules/

echo ""
echo "=== Current symlinks in ~/.cursor/rules ==="
ls -la ~/.cursor/rules/ 2>/dev/null | grep -E "^l" || echo "No symlinks found"

echo ""
echo "=== Git status ==="
git status --short
```

### 3. Pull latest changes

Fetch and pull the latest changes from the remote repository:

```bash
git fetch origin
git pull origin main
```

Report what changed (if anything):
- If there were updates, show a summary of the changes
- If already up to date, inform the user

### 4. Run the install script

Run the install script with the `--force` and `--cursor` flags to update existing symlinks:

```bash
./install.sh --force --cursor
```

### 5. Verify installation

Confirm the rules are properly linked:

```bash
echo "=== Installed rules ==="
for rule in cursor-rules/*.mdc; do
    rule_name=$(basename "$rule")
    target="$HOME/.cursor/rules/$rule_name"
    if [ -L "$target" ]; then
        echo "✓ $rule_name"
    else
        echo "✗ $rule_name (not linked)"
    fi
done
```

### 6. Report completion

Provide a summary to the user:
- Number of rules updated/installed
- Any new rules that were added
- Any errors encountered

## Notes

- This rule finds the repository by following symlinks from `~/.cursor/rules/`
- Use `--force` to ensure symlinks are updated even if they already exist
- Existing user rules (non-symlinked files) are never overwritten
